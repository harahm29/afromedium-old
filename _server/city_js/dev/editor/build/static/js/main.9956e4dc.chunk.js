(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(11),l=a(13),s=a(12),i=a(14),o=a(1),c=a.n(o),m=a(15),u=a.n(m),h=(a(40),a(6)),p=(a(41),a(130)),d=a(131),f=a(132),g=a(133),E=a(145),v=a(134),w=a(135),b=a(136),y=a(137),O=a(138),S=a(139),j=function(e){function t(e){var a,r=e.mesh;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).toggle=function(){a.setState(function(e){return{collapse:!e.collapse}})},a.changeScale=function(e){var t=e.target.value;a.setState(function(e){return{scale:t}}),a.mesh.scale.set(t,t,t),a.mesh.userData.scale=t},a.changeBuffer=function(e){var t=e.target.value;a.setState(function(e){return{buffer:t}}),a.mesh.userData.buffer=t},a.changeSide=function(e){var t=parseInt(e.target.value);a.setState(function(e){return{side:t}}),a.mesh.material.side=t,a.mesh.userData.side=t},a.changeShadows=function(e){var t=e.target.value;a.setState(function(e){return{shadows:t}}),a.mesh.userData.shadows=t},a.changeMap=function(e){var t=e.target.files[0],n=t.name,r=new FileReader,l=new Image,s=new h.Texture(l);s.wrapS=s.wrapT=h.RepeatWrapping,l.onload=function(){s.needsUpdate=!0},r.addEventListener("load",function(e){l.src=e.target.result},!1),r.readAsDataURL(t),a.mesh.material.map=s,a.mesh.material.needsUpdate=!0,console.log(t.name),a.setState(function(e){return{map:n}}),a.mesh.userData.map=n},a.changeAlpha=function(e){var t=e.target.files[0],n=t.name,r=new FileReader,l=new Image,s=new h.Texture(l);s.wrapS=s.wrapT=h.RepeatWrapping,l.onload=function(){s.needsUpdate=!0},r.addEventListener("load",function(e){l.src=e.target.result},!1),r.readAsDataURL(t),a.mesh.material.alphaMap=s,a.mesh.material.transparent=!0,a.mesh.material.needsUpdate=!0,a.setState(function(e){return{alpha:n}}),a.setState(function(e){return{transparent:"1"}}),a.mesh.userData.alpha=n,a.mesh.userData.transparent="1"},a.changeLightMap=function(e){var t=e.target.files[0],n=t.name,r=new FileReader,l=new Image,s=new h.Texture(l);s.wrapS=s.wrapT=h.RepeatWrapping,l.onload=function(){s.needsUpdate=!0},r.addEventListener("load",function(e){l.src=e.target.result},!1),r.readAsDataURL(t),a.mesh.material.lightMap=s,a.mesh.material.needsUpdate=!0,a.setState(function(e){return{lightMap:n}}),a.mesh.userData.lightmap=n},a.changeAlphaTest=function(e){var t=e.target.value;a.setState(function(e){return{alphaTest:t}}),a.mesh.material.alphaTest=t,a.mesh.userData.alphaTest=t},a.changeTransparent=function(e){var t=parseInt(e.target.value);a.setState(function(e){return{transparent:t}}),a.mesh.material.transparent=!(!t&&!a.state.alpha),a.mesh.material.needsUpdate=!0,a.mesh.userData.transparent=t},a.changeColor=function(e){var t=e.target.value;a.setState(function(e){return{color:t}}),a.mesh.material.color.set(parseInt(t,16)),a.mesh.userData.color=t},a.changeCollider=function(e){var t=e.target.value;a.setState(function(e){return{collider:t}}),"1"===t?a.setState(function(e){return{buffer:"0"}}):a.setState(function(e){return{buffer:"1"}}),a.mesh.material.wireframe="1"==t,a.mesh.material.needsUpdate=!0,a.mesh.userData.collider=t},a.changeWireframe=function(e){var t=e.target.value;a.setState(function(e){return{wireframe:t}}),a.mesh.material.wireframe="1"===t||"1"==a.state.collider,a.mesh.material.needsUpdate=!0,a.mesh.userData.wireframe=t},a.changeOpacity=function(e){var t=e.target.value;a.setState(function(e){return{opacity:t}}),a.mesh.material.opacity=t,a.mesh.userData.opacity=t},a.changePosX=function(e){var t=e.target.value;a.setState(function(e){return{pos:[t,a.state.pos[1],a.state.pos[2]]}}),a.mesh.position.x=t,a.mesh.userData.pos[0]=t},a.changePosY=function(e){var t=e.target.value;a.setState(function(e){return{pos:[a.state.pos[0],t,a.state.pos[2]]}}),a.mesh.position.z=t,a.mesh.userData.pos[1]=t},a.changePosZ=function(e){var t=e.target.value;a.setState(function(e){return{pos:[a.state.pos[0],a.state.pos[1],t]}}),a.mesh.position.y=t,a.mesh.userData.pos[2]=t},a.changeRotX=function(e){var t=e.target.value;a.setState(function(e){return{rot:[t,a.state.rot[1],a.state.rot[2]]}}),a.mesh.rotation.x=t,a.mesh.userData.rot[0]=t},a.changeRotY=function(e){var t=e.target.value;a.setState(function(e){return{pos:[a.state.rot[0],t,a.state.rot[2]]}}),a.mesh.rotation.y=t,a.mesh.userData.rot[1]=t},a.changeRotZ=function(e){var t=e.target.value;a.setState(function(e){return{pos:[a.state.rot[0],a.state.rot[1],t]}}),a.mesh.rotation.z=t,a.mesh.userData.rot[2]=t},a.state={collapse:!1,scale:"1",buffer:"1",side:"0",shadows:!1,map:null,alpha:null,lightmap:null,alphaTest:"0",transparent:"0",opacity:"1",color:"ffffff",collider:"0",wirframe:"0",pos:[0,0,0],rot:[0,0,0]},a.mesh=r,a.mesh.userData={scale:"1",buffer:"1",side:"0",shadows:!1,map:null,alpha:null,lightmap:null,alphaTest:"0",transparent:"0",opacity:"1",color:"ffffff",collider:"0",wirframe:"0",pos:[0,0,0],rot:[0,0,0]},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(p.a,null,c.a.createElement(d.a,null,c.a.createElement(f.a,null,this.mesh.name),c.a.createElement(f.a,null,"  ",c.a.createElement(g.a,{color:"primary",onClick:this.toggle,style:{marginBottom:"1rem"}},"Options")))),c.a.createElement(E.a,{isOpen:this.state.collapse},c.a.createElement(v.a,null,c.a.createElement(w.a,null,c.a.createElement(b.a,null,c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"scale"},"Scale"),c.a.createElement(S.a,{name:"scale",id:"scale",value:this.state.scale,onChange:this.changeScale})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"buffer"},"BufferGeometry"),c.a.createElement(S.a,{type:"select",name:"buffer",id:"buffer",onChange:this.changeBuffer},c.a.createElement("option",{selected:"1"==this.state.buffer},"1"),c.a.createElement("option",{selected:"0"==this.state.buffer},"0"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"side"},"Face Side"),c.a.createElement(S.a,{type:"select",name:"side",id:"side",onChange:this.changeSide},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"),c.a.createElement("option",null,"2"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"shadows"},"Floor (shadows)"),c.a.createElement(S.a,{type:"select",name:"shadows",id:"shadows",onChange:this.changeShadows},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"map"},"Diffuse map"),c.a.createElement(S.a,{type:"file",name:"map",id:"map",onChange:this.changeMap})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"alpha"},"Alpha map"),c.a.createElement(S.a,{type:"file",name:"alpha",id:"alpha",onChange:this.changeAlpha})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"light"},"Light map"),c.a.createElement(S.a,{type:"file",name:"light",id:"light",onChange:this.changeLightMap})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"alphaTest"},"alphaTest"),c.a.createElement(S.a,{name:"alphaTest",id:"alphaTest",value:this.state.alphaTest,onChange:this.changeAlphaTest})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"transparent"},"Transparent"),c.a.createElement(S.a,{type:"select",name:"transparent",id:"transparent",onChange:this.changeTransparent},c.a.createElement("option",{selected:"0"==this.state.transparent},"0"),c.a.createElement("option",{selected:"1"==this.state.transparent},"1"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"opacity"},"Opacity"),c.a.createElement(S.a,{name:"scale",id:"scale",value:this.state.opacity,onChange:this.changeOpacity})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"color"},"Color"),c.a.createElement(S.a,{name:"color",id:"color",value:this.state.color,onChange:this.changeColor})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"collider"},"Collider"),c.a.createElement(S.a,{type:"select",name:"collider",id:"collider",onChange:this.changeCollider},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"wireframe"},"Wireframe"),c.a.createElement(S.a,{type:"select",name:"wireframe",id:"wireframe",onChange:this.changeWireframe},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"pos"},"Position"),c.a.createElement(S.a,{name:"posX",id:"posX",value:this.state.pos[0],onChange:this.changePosX}),c.a.createElement(S.a,{name:"posY",id:"posY",value:this.state.pos[1],onChange:this.changePosY}),c.a.createElement(S.a,{name:"posZ",id:"posZ",value:this.state.pos[2],onChange:this.changePosZ})),c.a.createElement(y.a,null,c.a.createElement(O.a,{for:"pos"},"Rotation"),c.a.createElement(S.a,{name:"rotX",id:"rotX",value:this.state.rot[0],onChange:this.changeRotX}),c.a.createElement(S.a,{name:"rotY",id:"rotY",value:this.state.rot[1],onChange:this.changeRotY}),c.a.createElement(S.a,{name:"rotZ",id:"rotZ",value:this.state.rot[2],onChange:this.changeRotZ})))))))}}]),t}(o.Component),C=a(72),D=a(38);C(h),D(h);var T=function(e){function t(e){var a,r=e.scene;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).toggle=function(e){var t=e.target.files[0],n=t.name,r=n.split(".").pop().toLowerCase(),l=new FileReader;switch(r){case"dae":l.addEventListener("load",function(e){var t=e.target.result;a.BABYLON=h;var r=(new D).parse(t);for(var l in r.scene.name=n,r.scene.children)r.scene.children[l].children[0].material=new h.MeshBasicMaterial,r.scene.children[l].children[0].name=r.scene.children[l].name,r.scene.children[l].children[0].position.copy(r.scene.children[l].position),r.scene.children[l].children[0].rotation.copy(r.scene.children[l].rotation),a.scene.add(r.scene.children[l].children[0]);u.a.render(c.a.createElement("div",null,a.scene.children.map(function(e){return c.a.createElement(j,{key:e.uuid,mesh:e})})),document.getElementById("ui"))},!1),l.readAsText(t);break;case"obj":l.addEventListener("load",function(e){var t=e.target.result;a.BABYLON=h;var r=(new a.BABYLON.OBJLoader).parse(t);for(var l in r.name=n,r.children)r.children[l].material=new h.MeshBasicMaterial,a.scene.add(r.children[l]);u.a.render(c.a.createElement("div",null,a.scene.children.map(function(e){return c.a.createElement(j,{key:e.uuid,mesh:e})})),document.getElementById("ui"))},!1),l.readAsText(t);break;default:console.log("bad format")}},a.scene=r,a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("label",null,"Import",c.a.createElement("input",{type:"file",name:"file",onChange:this.toggle,className:"hidden"}))}}]),t}(o.Component),R=a(73),k=a.n(R),L=a(74),x=function(e){function t(e){var a,r=e.scene;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).toggle=function(e){var t=new k.a,n=t.folder("textures").folder("loc"),r=t.folder("geometry").folder("loc"),l={},s=[],i={obj:s,z:20},o=[];for(var c in a.scene.children){var m=a.scene.children[c],u=m.userData,p={};if(p.scale=u.scale,p.geo=m.name+".js",p.buffer="1"===u.buffer,u.map&&(p.map=u.map,-1===o.indexOf(u.map))){o.push(u.map);var d=m.material.map.image.src.split(",");n.file(u.map,d[1],{base64:!0})}if(u.alpha&&(p.alpha=u.alpha,-1===o.indexOf(u.alpha))){o.push(u.alpha);var f=m.material.alphaMap.image.src.split(",");n.file(u.alpha,f[1],{base64:!0})}if(u.lightmap&&(p.lightmap=u.lightmap,-1===o.indexOf(u.lightmap))){o.push(u.lightmap);var g=m.material.lightMap.image.src.split(",");n.file(u.lightmap,g[1],{base64:!0})}p.side=parseInt(u.side),"1"===u.shadows&&(p.shadows=!0),u.alphaTest>0&&(p.alphaTest=u.alphaTest),"1"===u.transparent&&(p.transparent=!0),p.opacity=u.opacity,p.color=parseInt(u.color,"16"),"1"===u.collider&&(p.collider=!0),"1"===u.wirframe&&(p.wirframe=!0),p.pos=u.pos,p.rot=u.rot,l[m.name]=p,s.push({id:m.name});var E=void 0;"BufferGeometry"===m.geometry.type?(E=new h.Geometry).fromBufferGeometry(m.geometry):E=m.geometry,r.file(m.name+".js",JSON.stringify(E.toJSON().data))}t.file("assets.js",JSON.stringify(l)),t.file("locations.js",JSON.stringify(i)),t.generateAsync({type:"blob"}).then(function(e){Object(L.a)(e,"export.zip")})},a.scene=r,a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.toggle}," Export ")}}]),t}(o.Component),B=function(e){function t(e){var a,r=e.scene;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).toggle=function(e){u.a.render(c.a.createElement("div",null),document.getElementById("ui")),a.scene.children=[]},a.scene=r,a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.toggle},"Reset")}}]),t}(o.Component),M=a(140),A=a(141),I=a(142),W=a(143),U=a(144),z=function(e){function t(e){var a,r=e.scene;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).importOBJ=function(){console.log("import obj")},a.importDAE=function(){console.log("import DAE")},a.toggle=function(){a.setState({isOpen:!a.state.isOpen})},a.state={importDropdownOpen:!1},a.scene=r,a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(M.a,{color:"light",light:!0,expand:"md"},c.a.createElement(A.a,{onClick:this.toggle}),c.a.createElement(E.a,{isOpen:this.state.isOpen,navbar:!0},c.a.createElement(I.a,{className:"ml-auto",navbar:!0},c.a.createElement(W.a,null,c.a.createElement(U.a,null,"  ",c.a.createElement(T,{scene:this.scene}))),c.a.createElement(W.a,null,c.a.createElement(U.a,null,c.a.createElement(x,{scene:this.scene}))),c.a.createElement(W.a,null,c.a.createElement(U.a,null,c.a.createElement(B,{scene:this.scene})))))))}}]),t}(o.Component),P=a(128)(h),J=new h.Scene,X=new h.Group;J.add(X);var Y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).onWindowResize=function(){a.camera.aspect=window.innerWidth/window.innerHeight,a.camera.updateProjectionMatrix(),a.renderer.setSize(window.innerWidth,window.innerHeight)},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=new h.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e4);this.camera=e;var t=new h.WebGLRenderer;this.renderer=t,t.setSize(window.innerWidth,window.innerHeight),this.mount.appendChild(t.domElement),e.position.z=150,e.position.y=150;for(var a=new h.Geometry,n=-2500;n<=2500;n+=50)a.vertices.push(new h.Vector3(-2500,0,n)),a.vertices.push(new h.Vector3(2500,0,n)),a.vertices.push(new h.Vector3(n,0,-2500)),a.vertices.push(new h.Vector3(n,0,2500));var r=new h.LineBasicMaterial({color:16777215,opacity:.5,transparent:!0}),l=new h.LineSegments(a,r);J.add(l);new P(e,t.domElement);window.addEventListener("resize",this.onWindowResize,!1),function a(){requestAnimationFrame(a),t.render(J,e)}()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(t){return e.mount=t}})}}]),t}(o.Component),Z=document.getElementById("root");u.a.render(c.a.createElement(Y,null),Z),u.a.render(c.a.createElement(z,{scene:X}),document.getElementById("menu"))},40:function(e,t,a){},76:function(e,t,a){e.exports=a(129)},94:function(e,t){},96:function(e,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.9956e4dc.chunk.js.map